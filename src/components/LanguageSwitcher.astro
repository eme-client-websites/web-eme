---
import { languages, getLangFromUrl } from '../i18n/utils';

const currentLang = getLangFromUrl(Astro.url);
const otherLang = currentLang === 'es' ? 'en' : 'es';

// Construir la URL para el otro idioma
function getOtherLangUrl() {
  const pathname = Astro.url.pathname;
  
  if (currentLang === 'es') {
    // Si estamos en español, agregar /en al inicio
    return '/en' + pathname;
  } else {
    // Si estamos en inglés, quitar /en del inicio
    return pathname.replace('/en', '') || '/';
  }
}

const otherLangUrl = getOtherLangUrl();
---

<!-- Switch flotante en esquina inferior derecha -->
<div class="fixed bottom-6 right-6 z-50">
  <div class="flex items-center bg-black/20 backdrop-blur-md border border-white/10 rounded-full px-3 py-2 shadow-lg">
    <span class="text-white text-sm font-medium uppercase tracking-wide">{currentLang}</span>
    <span class="text-white/30 mx-2">|</span>
    <a 
      href={otherLangUrl}
      class="text-white/60 hover:text-white transition-all duration-300 text-sm font-medium uppercase tracking-wide hover:scale-105"
    >
      {otherLang}
    </a>
  </div>
</div>

