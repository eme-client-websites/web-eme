---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Array de todos los logos de clientes
const clientes = [
  { name: 'Centro Brillo', logo: '/logos/clients/imgi_25_Centro-brillo--scaled.png' },
  { name: 'Genavie', logo: '/logos/clients/imgi_26_Genavie-scaled.png' },
  { name: 'Gecelca', logo: '/logos/clients/imgi_27_Gecelca-scaled.png' },
  { name: 'Galería Elsa', logo: '/logos/clients/imgi_28_Galeria-Elsa-scaled.png' },
  { name: 'Estrategias', logo: '/logos/clients/imgi_29_estrategias-scaled.png' },
  { name: 'Ditar', logo: '/logos/clients/imgi_30_ditar-scaled.png' },
  { name: 'Dermatocentro', logo: '/logos/clients/imgi_31_Dermatocentro--scaled.png' },
  { name: 'Cruz Roja', logo: '/logos/clients/imgi_32_Cruzroja-scaled.png' },
  { name: 'Finsocial', logo: '/logos/clients/imgi_33_Finsocial-scaled.png' },
  { name: 'Adona', logo: '/logos/clients/imgi_34_Adona-scaled.png' },
  { name: 'Apparta', logo: '/logos/clients/imgi_35_Apparta-scaled.png' },
  { name: 'Assuro', logo: '/logos/clients/imgi_36_Assuro--scaled.png' },
  { name: 'Corpofit', logo: '/logos/clients/imgi_37_corpofit-scaled.png' },
  { name: 'Cerid', logo: '/logos/clients/imgi_38_Cerid-scaled.png' },
  { name: 'Carnes Santacruz', logo: '/logos/clients/imgi_39_Carnes-Santacruz-scaled.png' },
  { name: 'Calzacosta', logo: '/logos/clients/imgi_40_Calzacosta-scaled.png' },
  { name: 'Brilla', logo: '/logos/clients/imgi_41_Brilla-scaled.png' },
  { name: 'Bicosa', logo: '/logos/clients/imgi_42_Bicosa-scaled.png' },
  { name: 'Beatriz Camacho', logo: '/logos/clients/imgi_43_Beatriz-camacho-scaled.png' },
  { name: 'Puerta de Oro', logo: '/logos/clients/imgi_44_Puerta-de-oro-scaled.png' },
  { name: 'Puerto de Barranquilla', logo: '/logos/clients/imgi_45_Puerto-de-barranquilla-scaled.png' },
  { name: 'Soluzzioni', logo: '/logos/clients/imgi_46_Soluzzioni-scaled.png' },
  { name: 'Topping Burgers', logo: '/logos/clients/imgi_47_Topping-Burguers-scaled.png' },
  { name: 'Quirulaser', logo: '/logos/clients/imgi_48_Quirulaser-scaled.png' },
  { name: 'Samir J', logo: '/logos/clients/imgi_49_Samir-J-scaled.png' },
  { name: 'Viva tu Crédito', logo: '/logos/clients/imgi_50_Viva-tu-credito-scaled.png' },
  { name: 'Yoyoso', logo: '/logos/clients/imgi_51_yoyoso-scaled.png' },
  { name: 'Sandra', logo: '/logos/clients/imgi_52_Sandra-scaled.png' },
  { name: 'Matymount', logo: '/logos/clients/imgi_53_Matymount-scaled.png' },
  { name: 'Malecón', logo: '/logos/clients/imgi_54_Malecon-scaled.png' },
  { name: 'Maffes', logo: '/logos/clients/imgi_55_Maffes-scaled.png' },
  { name: 'LPR', logo: '/logos/clients/imgi_56_LPR-scaled.png' },
  { name: 'Jacur', logo: '/logos/clients/imgi_57_Jacur-scaled.png' },
  { name: 'HVR', logo: '/logos/clients/imgi_58_HVR-scaled.png' },
  { name: 'Herbana', logo: '/logos/clients/imgi_59_Herbana-scaled.png' },
  { name: 'Gobernación del Atlántico', logo: '/logos/clients/imgi_60_Gobernacion-del-atlantico--scaled.png' },
  { name: 'Ofra', logo: '/logos/clients/imgi_61_Ofra-scaled.png' },
  { name: 'SCP', logo: '/logos/clients/imgi_62_SCP-scaled.png' },
  { name: 'Selman', logo: '/logos/clients/imgi_63_Selman-scaled.png' },
  { name: 'Oralty', logo: '/logos/clients/imgi_64_Oralty-scaled.png' },
  { name: 'Promigas', logo: '/logos/clients/imgi_65_Promigas-scaled.png' },
  { name: 'Sempertex', logo: '/logos/clients/imgi_66_Sempertex-scaled.png' },
  { name: 'Skin Healthly', logo: '/logos/clients/imgi_67_SkinHealthly-scaled.png' }
];

// Dividir clientes en grupos para diferentes animaciones
const clientesGroup1 = clientes.slice(0, 14);
const clientesGroup2 = clientes.slice(14, 28); 
const clientesGroup3 = clientes.slice(28);
---

<section class="py-20 lg:py-32 relative overflow-hidden" style="background: transparent;">
  <!-- Efectos de luz de fondo -->
  <div class="absolute top-0 left-1/4 w-96 h-96 bg-[#0043FF] rounded-full mix-blend-screen filter blur-3xl opacity-5"></div>
  <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-[#0033C4] rounded-full mix-blend-screen filter blur-3xl opacity-5"></div>

  <!-- Título principal -->
  <div class="container-custom relative z-10 mb-16">
    <div class="text-center">
      <div class="inline-block mb-6">
        <span class="text-[#0043FF] text-sm font-semibold uppercase tracking-widest">
          {lang === 'en' ? 'Trusted by Industry Leaders' : 'Confianza de Líderes Industriales'}
        </span>
      </div>
      
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold dynamic-text mb-6 leading-tight transition-colors duration-300">
        {lang === 'en' ? (
          <>
            <span class="block">Brands that</span>
            <span class="block bg-gradient-to-r from-[#0043FF] to-[#0033C4] bg-clip-text text-transparent">
              believe in us
            </span>
          </>
        ) : (
          <>
            <span class="block">Marcas que</span>
            <span class="block bg-gradient-to-r from-[#0043FF] to-[#0033C4] bg-clip-text text-transparent">
              confían en nosotros
            </span>
          </>
        )}
      </h2>
      
      <p class="text-lg dynamic-text opacity-70 max-w-2xl mx-auto transition-colors duration-300">
        {lang === 'en' 
          ? 'Over 40+ leading companies have chosen E-ME Growth Agency to transform their digital presence and accelerate their growth.'
          : 'Más de 40+ empresas líderes han elegido E-ME Growth Agency para transformar su presencia digital y acelerar su crecimiento.'
        }
      </p>
    </div>
  </div>

  <!-- Showcase con múltiples efectos -->
  <div class="relative">
    
    <!-- Primera fila - Movimiento hacia la derecha -->
    <div class="clients-marquee mb-8">
      <div class="clients-track clients-track-right">
        {[...clientesGroup1, ...clientesGroup1, ...clientesGroup1].map((cliente) => (
          <div class="client-logo-wrapper">
            <div class="client-logo-container">
              <img 
                src={cliente.logo} 
                alt={cliente.name}
                class="client-logo"
                loading="eager"
              />
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Segunda fila - Movimiento hacia la izquierda -->
    <div class="clients-marquee mb-8">
      <div class="clients-track clients-track-left">
        {[...clientesGroup2, ...clientesGroup2, ...clientesGroup2].map((cliente) => (
          <div class="client-logo-wrapper">
            <div class="client-logo-container">
              <img 
                src={cliente.logo} 
                alt={cliente.name}
                class="client-logo"
                loading="eager"
              />
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Tercera fila - Movimiento hacia la derecha (más lento) -->
    <div class="clients-marquee">
      <div class="clients-track clients-track-right-slow">
        {[...clientesGroup3, ...clientesGroup3, ...clientesGroup3].map((cliente) => (
          <div class="client-logo-wrapper">
            <div class="client-logo-container">
              <img 
                src={cliente.logo} 
                alt={cliente.name}
                class="client-logo"
                loading="eager"
              />
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Gradientes de fade en los extremos -->
    <div class="absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-[#030B46] to-transparent pointer-events-none z-10"></div>
    <div class="absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-[#030B46] to-transparent pointer-events-none z-10"></div>
  </div>

</section>

<style>
  /* Contenedor principal de marquee */
  .clients-marquee {
    overflow: hidden;
    white-space: nowrap;
    position: relative;
  }
  
  /* Track de animación */
  .clients-track {
    display: inline-flex;
    gap: 3rem;
    align-items: center;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    /* Asegurar altura consistente */
    min-height: 80px;
  }
  
  /* Animaciones direccionales - Velocidad optimizada */
  .clients-track-right {
    animation: marquee-right 60s linear infinite;
  }
  
  .clients-track-left {
    animation: marquee-left 50s linear infinite;
  }
  
  .clients-track-right-slow {
    animation: marquee-right 80s linear infinite;
  }
  
  /* Keyframes para animaciones - Movimiento infinito sin espacios */
  @keyframes marquee-right {
    0% { transform: translateX(-66.666%); }
    100% { transform: translateX(-33.333%); }
  }
  
  @keyframes marquee-left {
    0% { transform: translateX(-33.333%); }
    100% { transform: translateX(-66.666%); }
  }
  
  /* Wrapper del logo */
  .client-logo-wrapper {
    flex: 0 0 auto;
    padding: 0 1.5rem;
  }
  
  /* Contenedor del logo con efectos */
  .client-logo-container {
    position: relative;
    width: 160px;
    height: 80px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    /* Asegurar que siempre mantenga su tamaño */
    min-width: 160px;
    min-height: 80px;
    flex-shrink: 0;
  }
  
  /* Logo principal */
  .client-logo {
    max-width: 120px;
    max-height: 50px;
    width: auto;
    height: auto;
    filter: brightness(0) invert(1);
    transition: all 0.4s ease;
    object-fit: contain;
  }
  
  /* Solo efecto de iluminación suave en hover */
  .client-logo-container:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(0, 67, 255, 0.2);
  }
  
  
  /* Pausa las animaciones en hover global */
  .clients-marquee:hover .clients-track {
    animation-play-state: paused;
  }
  
  /* Estadísticas con animación */
  .stat-item {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
  }
  
  .stat-item:nth-child(1) { animation-delay: 0.1s; }
  .stat-item:nth-child(2) { animation-delay: 0.2s; }
  .stat-item:nth-child(3) { animation-delay: 0.3s; }
  .stat-item:nth-child(4) { animation-delay: 0.4s; }
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .client-logo-container {
      width: 120px;
      height: 60px;
    }
    
    .client-logo {
      max-width: 90px;
      max-height: 40px;
    }
    
    .clients-track {
      gap: 2rem;
    }
    
    .client-logo-wrapper {
      padding: 0 1rem;
    }
    
    .clients-track-right {
      animation-duration: 45s;
    }
    
    .clients-track-left {
      animation-duration: 40s;
    }
    
    .clients-track-right-slow {
      animation-duration: 60s;
    }
  }
  
</style>
