---
// Datos de proyectos extraídos de e-me.co
const proyectos = [
  {
    id: 'apparta',
    nombre: 'Apparta',
    descripcion: 'Donde las reservas digitales encuentran la simplicidad visual.',
    imagen: '/Apparta.webp',
    link: '/proyectos/apparta',
    servicios: ['UI/UX', 'Desarrollo', 'Branding'],
    detalles: {
      descripcionCompleta: 'La fenomenal aplicación top 5 en la categoría de Alimentos y Bebidas de Colombia en AppStore y Google Playstore. Explora una amplia red de más de 2000 restaurantes y desbloquea descuentos exclusivos a través de reservas en restaurantes. Respaldado por una notable inversión de $2 millones de dólares de distinguidos capitales de riesgo de EE. UU. y Latinoamérica, y adoptado por más de 1 millón de usuarios.',
      tecnologias: [
        'Aplicación móvil Android e iOS',
        'Diseño y prototipo UI/UX', 
        'Desarrollo de back-end',
        'Panel de administración',
        'Arquitectura del servidor AWS'
      ],
      caracteristicas: [
        'Inicio de sesión con contraseña única',
        'Reservas de mesa en tiempo real',
        'Gestor de disponibilidad de descuentos',
        'Apparta wallet para pagos en restaurante',
        'Reservas compartibles con amigos',
        'Búsqueda avanzada con filtros dinámicos',
        'Funcionalidad de búsqueda dinámica de mapas',
        'Menú digital interactivo del restaurante',
        'Calificaciones y reseñas atractivas',
        'Funcionalidad de reembolso por fidelidad'
      ],
      rol: 'Desarrollo Completo',
      solucion: 'Aplicación móvil / E-commerce',
      creditos: 'E-me Growth Agency',
      duracion: '8 meses',
      website: 'https://apparta.com'
    }
  },
  {
    id: 'carnes-santacruz',
    nombre: 'Carnes Santacruz',
    descripcion: 'E-commerce premium que conecta tradición con tecnología moderna.',
    imagen: '/proyecto-carnes.jpg',
    link: '/proyectos/carnes-santacruz',
    servicios: ['E-commerce', 'Web Design', 'Marketing Digital']
  },
  {
    id: 'sandra',
    nombre: 'Sandra',
    descripcion: 'Identidad digital que eleva servicios profesionales al siguiente nivel.',
    imagen: '/proyecto-sandra.jpg',
    link: '/proyectos/sandra',
    servicios: ['Branding', 'Web Design', 'UI/UX']
  },
  {
    id: 'eme-experience',
    nombre: 'E-me Experience System',
    descripcion: 'Sistema integral donde cada proceso empresarial cobra nueva vida.',
    imagen: '/proyecto-eme-system.jpg',
    link: '/proyectos/eme-experience',
    servicios: ['UI/UX', 'Desarrollo', 'Web Design']
  },
  {
    id: 'promigas',
    nombre: 'Promigas App',
    descripcion: 'App móvil que transforma la gestión de servicios de gas natural.',
    imagen: '/proyecto-promigas.jpg',
    link: '/proyectos/promigas',
    servicios: ['Mobile App', 'UI/UX', 'Desarrollo']
  },
  {
    id: 'yoyoso',
    nombre: 'Yoyoso',
    descripcion: 'Plataforma internacional donde el comercio global se vuelve personal.',
    imagen: '/proyecto-yoyoso.jpg',
    link: '/proyectos/yoyoso',
    servicios: ['E-commerce', 'Branding', 'UI/UX']
  }
];
---

<!-- Título de la sección - Estructura exacta de Designatives -->
<section class="xl:pt-32 bg-gradient-to-b from-[#000000] via-[#000408] to-[#000510] relative overflow-hidden" data-active="true" data-color="#FFFFFF">
  <!-- Efectos de luz de fondo -->
  <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-[#0043FF] rounded-full mix-blend-screen filter blur-3xl opacity-5"></div>
  <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-[#0033C4] rounded-full mix-blend-screen filter blur-3xl opacity-5"></div>

  <div class="container-custom relative z-10">
    <div class="w-1/2">
      <h2 class="text-5xl lg:text-7xl font-bold text-white leading-tight tracking-tight max-w-lg">
        <span class="relative opacity-100 transform-none">
          <span class="opacity-100">Proyectos </span>
          <div class="absolute left-0 top-0 w-full xl:-top-0 xl:left-0"></div>
        </span>
        <br>
        <span class="opacity-100 transform-none text-gray-300">Seleccionados </span>
      </h2>
    </div>
  </div>
</section>

<!-- Grid de proyectos - Estructura exacta de Designatives -->
<section data-active="false" data-color="#FFFFFF" class="pb-20 lg:pt-52 xl:pb-40 xl:pt-20 bg-gradient-to-b from-[#000510] via-[#000408] to-[#000000]">
  <div class="container-custom">
    <div class="grid grid-cols-1 gap-10 lg:gap-20 xl:gap-12">
      <div class="space-y-10 lg:space-y-0 mt-10 lg:mt-[-20rem]">
        {proyectos.map((proyecto, index) => (
          <div class="relative flex w-full items-center">
            <div class="absolute -top-1/2 w-full"></div>
            <div class={`flex w-full gap-x-10 xl:gap-x-16 opacity-100 transform-none ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>
              <div class="hidden w-full lg:flex lg:w-1/2"></div>
              <div class="relative z-10 w-full lg:w-1/2">
                <div class="w-full text-left cursor-pointer group relative" onclick={`openProjectModal('${proyecto.id}')`}>
                  <div class="aspect-square w-full relative">
                    <div class="flex w-full items-center justify-center">
                      <div class="w-full">
                        <div class="w-full rounded-3xl overflow-hidden relative">
                          <div class="w-full rounded-3xl overflow-hidden">
                            <div class="aspect-square h-full w-full overflow-hidden rounded-3xl">
                              {/* Condicional para mostrar imagen real o placeholder */}
                              {proyecto.id === 'apparta' && proyecto.imagen ? (
                                <img 
                                  src={proyecto.imagen} 
                                  alt={proyecto.nombre}
                                  class="w-full h-full object-cover rounded-3xl"
                                />
                              ) : (
                                <!-- Placeholder para imagen con gradiente -->
                                <div class="w-full h-full aspect-square bg-gradient-to-br from-[#0043FF]/30 to-[#0033C4]/30 flex items-center justify-center relative rounded-3xl">
                                  <div class="absolute inset-0 bg-gradient-to-br from-[#0043FF]/20 to-[#0033C4]/20"></div>
                                  <div class="text-white/70 text-center z-10">
                                    <div class="w-20 h-20 mx-auto mb-6 bg-white/15 rounded-3xl flex items-center justify-center backdrop-blur-sm">
                                      <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                      </svg>
                                    </div>
                                    <p class="text-lg font-medium">{proyecto.nombre}</p>
                                  </div>
                                </div>
                              )}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Botón estilo exacto del ejemplo -->
                    <div class="absolute bottom-3 left-3">
                      <div class="bg-white rounded-2xl px-5 py-3 flex items-center space-x-3 shadow-lg group-hover:shadow-xl transition-shadow duration-300">
                        <!-- Texto del proyecto -->
                        <div class="text-black font-medium text-base">
                          {proyecto.nombre}
                        </div>
                        
                        <!-- Icono con fondo negro en hover -->
                        <div class="relative w-6 h-6 flex items-center justify-center">
                          <!-- Fondo negro con animación suave -->
                          <div class="absolute inset-0 bg-black rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                          
                          <!-- Flecha -->
                          <svg class="relative w-4 h-4 text-black group-hover:text-white transition-colors duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M7 11.5H17.0635M17.0635 11.5L12.5635 7M17.0635 11.5L12.5635 16"></path>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                  <span class="sr-only">Ver detalles sobre {proyecto.nombre}</span>
                </div>
                
                <div class="bottom-0 pt-8 lg:absolute lg:translate-y-full lg:pt-6">
                  <button class="w-full text-left" onclick={`openProjectModal('${proyecto.id}')`}>
                    <h2 class="flex flex-wrap gap-x-2 xl:gap-x-2 text-4xl xl:text-5xl font-bold text-white">
                      {proyecto.nombre.split(' ').map((palabra, i) => (
                        <div class="inline-flex w-auto opacity-100 transform-none">
                          {palabra}
                        </div>
                      ))}
                    </h2>
                    <span class="sr-only">Ver detalles sobre {proyecto.nombre}</span>
                    <p class="pt-2 text-gray-300 xl:pt-2 opacity-100 transform-none text-lg">
                      {proyecto.descripcion}
                    </p>
                    
                    <div class="flex flex-wrap gap-3 pt-4 xl:pt-3">
                      {proyecto.servicios.map((servicio) => (
                        <div class="inline-block overflow-hidden opacity-100 transform-none">
                          <div class="bg-white/5 px-4 py-2 text-sm font-normal text-white/80 rounded-lg hover:bg-white/10 transition-all duration-200">
                            <span class="inline-block opacity-100 transform-none">{servicio}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
    
    <!-- Enlace para ver más trabajos -->
    <div class="w-full pt-20 md:pt-20 lg:pt-52 xl:pt-40">
      <a href="/proyectos">
        <span class="group relative inline-flex items-center overflow-hidden font-bold text-xl text-white transition-all duration-300 ease-in-out xl:text-2xl uppercase tracking-wide">
          Más de nuestro trabajo
          <svg width="24" height="24" class="ml-2 fill-white transition-all duration-300 ease-in-out group-hover:md:ml-4 xl:ml-2 group-hover:xl:ml-4" data-icon="arrow">
            <g>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M18.8457 12L8.85393 1.63591L10.4311 0L22 12L10.4311 24L8.85393 22.3641L18.8457 12Z"></path>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M0 10.8431H20.4235V13.1566H0V10.8431Z"></path>
            </g>
          </svg>
          <div class="absolute bottom-0 left-0 h-0.5 w-full bg-white transition-all duration-500 ease-in-out group-hover:md:left-full"></div>
          <div class="absolute -left-full bottom-0 h-0.5 w-full bg-white transition-all delay-100 duration-700 ease-in-out group-hover:md:left-0"></div>
        </span>
      </a>
    </div>
  </div>
</section>

<!-- Modal para mostrar detalles del proyecto -->
<div id="projectModal" class="fixed inset-0 z-50 hidden">
  <!-- Overlay -->
  <div class="fixed inset-0 bg-black/80 backdrop-blur-sm" onclick="closeProjectModal()"></div>
  
  <!-- Modal Content -->
  <div class="fixed inset-0 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="relative w-full max-w-6xl bg-white rounded-2xl shadow-2xl">
        <!-- Close Button -->
        <button 
          onclick="closeProjectModal()" 
          class="absolute top-6 right-6 z-10 w-12 h-12 bg-black/10 hover:bg-black/20 rounded-full flex items-center justify-center transition-all duration-200"
        >
          <svg class="w-6 h-6 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <!-- Modal Body -->
        <div class="p-8">
          <!-- Header Section -->
          <div class="mb-8">
            <!-- Tags -->
            <div id="modalTags" class="flex flex-wrap gap-3 mb-6">
              <!-- Tags will be populated by JavaScript -->
            </div>
            
            <!-- Title -->
            <h1 id="modalTitle" class="text-5xl lg:text-6xl font-bold text-black mb-6">
              <!-- Title will be populated by JavaScript -->
            </h1>
            
            <!-- Visit Website Button -->
            <a 
              id="modalWebsiteLink" 
              href="#" 
              target="_blank" 
              rel="noopener noreferrer"
              class="inline-flex items-center px-6 py-3 bg-black text-white rounded-full font-medium hover:bg-gray-800 transition-all duration-200"
            >
              Visitar website
              <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
              </svg>
            </a>
          </div>

          <!-- Hero Image -->
          <div class="mb-12 -mx-6">
            <div class="w-full h-96 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden">
              <img src="/Apparta.webp" alt="Apparta Hero" class="w-full h-full object-cover">
            </div>
          </div>

          <!-- Project Description -->
          <div class="mb-12">
            <p id="modalDescription" class="text-lg text-gray-700 leading-relaxed">
              <!-- Description will be populated by JavaScript -->
            </p>
          </div>

          <!-- Project Info Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
            <!-- Role -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="text-xs font-semibold text-gray-900 uppercase tracking-wider mb-2">ROLE</h3>
              <p class="text-sm text-gray-700">
                Art Direction / UX-UI / Copywriting / Development
              </p>
            </div>

            <!-- Solutions -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="text-xs font-semibold text-gray-900 uppercase tracking-wider mb-2">SOLUTIONS</h3>
              <div id="modalTecnologias" class="text-sm text-gray-700 space-y-1">
                <!-- Technologies will be populated by JavaScript -->
              </div>
            </div>

            <!-- Credits -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="text-xs font-semibold text-gray-900 uppercase tracking-wider mb-2">CREDITS</h3>
              <p class="text-sm text-gray-700">
                En partnership con Spaag
              </p>
            </div>

            <!-- Project Duration -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="text-xs font-semibold text-gray-900 uppercase tracking-wider mb-2">PROJECT DURATION</h3>
              <p class="text-sm text-gray-700">
                3 months
              </p>
            </div>
          </div>

          <!-- Alcance y Características Grid -->
          <div class="mb-16">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <!-- Left Column: Alcance -->
              <div>
                <div class="mb-6">
                  <div class="bg-gray-100 px-4 py-2 rounded-lg mb-4 inline-block">
                    <span class="text-xs font-semibold text-gray-900 uppercase tracking-wider">ALCANCE</span>
                  </div>
                  <ul class="space-y-2 text-gray-700">
                    <li>- Aplicación móvil Android e iOS</li>
                    <li>- Diseño y prototipo UI/UX</li>
                    <li>- Desarrollo de back-end</li>
                    <li>- Panel de administración</li>
                    <li>- Arquitectura del servidor AWS</li>
                  </ul>
                </div>
              </div>

              <!-- Right Column: Características -->
              <div>
                <div class="mb-6">
                  <div class="bg-gray-100 px-4 py-2 rounded-lg mb-4 inline-block">
                    <span class="text-xs font-semibold text-gray-900 uppercase tracking-wider">CARACTERÍSTICAS</span>
                  </div>
                  <ul class="space-y-2 text-gray-700">
                    <li>- Inicio de sesión con contraseña única</li>
                    <li>- Reservas de mesa en tiempo real</li>
                    <li>- Gestor de disponibilidad de descuentos</li>
                    <li>- Apparta wallet para pagos en restaurante</li>
                    <li>- Reservas compartibles con amigos</li>
                    <li>- Búsqueda avanzada con filtros dinámicos</li>
                    <li>- Funcionalidad de búsqueda dinámica de mapas</li>
                    <li>- Menú digital interactivo del restaurante</li>
                    <li>- Calificaciones y reseñas atractivas</li>
                    <li>- Funcionalidad de reembolso por fidelidad</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Technologies Section Inline -->
            <div class="text-center mt-12">
              <div class="bg-gray-100 px-4 py-2 rounded-lg mb-6 inline-block">
                <span class="text-xs font-semibold text-gray-900 uppercase tracking-wider">TECNOLOGÍAS</span>
              </div>
              <div>
                <img src="/imgi_2_Grupo-19860.png" alt="Tecnologías utilizadas" class="mx-auto max-w-lg">
              </div>
            </div>
          </div>

          <!-- Style Guide Section -->
          <div class="mb-16">
            <div class="text-center mb-8">
              <h3 class="text-2xl font-bold text-black">Guía de estilo</h3>
            </div>
            
            <!-- Full Image -->
            <div class="mb-8">
              <img src="/imgi_5_Grupo-20420-2.png" alt="Guía de estilo completa" class="w-full h-auto">
            </div>

            <!-- Typography Section -->
            <div class="text-center mb-8">
              <h4 class="text-xl font-semibold mb-6">Poppins</h4>
              <img src="/imgi_7_Grupo-9346999.png" alt="Tipografía Poppins" class="mx-auto max-w-2xl h-auto">
            </div>

            <!-- Design Elements -->
            <div class="mb-8">
              <img src="/imgi_8_Grupo-20421-1.png" alt="Elementos de diseño" class="w-full h-auto">
            </div>
          </div>

          <!-- Hero Images Section -->
          <div class="mb-16">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <img src="/imgi_88_Grupo-19921-768x449.png" alt="Vista de la aplicación" class="w-full h-auto rounded-lg">
              <img src="/imgi_11_acercamiento-persona-que-disfruta-comida.png" alt="Usuario usando la app" class="w-full h-auto rounded-lg">
            </div>
          </div>

          <!-- Final Mobile Showcase -->
          <div class="mb-8 -mx-6">
            <img src="/imgi_17_Grupo-20422erowpeor.png" alt="Showcase completo de Apparta" class="w-full h-auto">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  // Datos de proyectos para el modal
  const proyectosData = {
    'apparta': {
      nombre: 'Apparta',
      descripcion: 'La fenomenal aplicación top 5 en la categoría de Alimentos y Bebidas de Colombia en AppStore y Google Playstore. Explora una amplia red de más de 2000 restaurantes y desbloquea descuentos exclusivos a través de reservas en restaurantes. Respaldado por una notable inversión de $2 millones de dólares de distinguidos capitales de riesgo de EE. UU. y Latinoamérica, y adoptado por más de 1 millón de usuarios.',
      imagen: '/Apparta.webp',
      servicios: ['UI/UX', 'Desarrollo', 'Branding'],
      tecnologias: [
        'Aplicación móvil Android e iOS',
        'Diseño y prototipo UI/UX', 
        'Desarrollo de back-end',
        'Panel de administración',
        'Arquitectura del servidor AWS'
      ],
      caracteristicas: [
        'Inicio de sesión con contraseña única',
        'Reservas de mesa en tiempo real',
        'Gestor de disponibilidad de descuentos',
        'Apparta wallet para pagos en restaurante',
        'Reservas compartibles con amigos',
        'Búsqueda avanzada con filtros dinámicos',
        'Funcionalidad de búsqueda dinámica de mapas',
        'Menú digital interactivo del restaurante',
        'Calificaciones y reseñas atractivas',
        'Funcionalidad de reembolso por fidelidad'
      ],
      rol: 'Desarrollo Completo',
      solucion: 'Aplicación móvil / E-commerce',
      creditos: 'E-me Growth Agency',
      duracion: '8 meses',
      website: 'https://apparta.com'
    }
  };

  function openProjectModal(projectId) {
    const modal = document.getElementById('projectModal');
    const project = proyectosData[projectId];
    
    if (!project || !modal) return;
    
    // Populate modal content
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');
    const modalImage = document.getElementById('modalImage');
    const modalRol = document.getElementById('modalRol');
    const modalSolucion = document.getElementById('modalSolucion');
    const modalCreditos = document.getElementById('modalCreditos');
    const modalDuracion = document.getElementById('modalDuracion');
    const modalWebsiteLink = document.getElementById('modalWebsiteLink');
    
    if (modalTitle) modalTitle.textContent = project.nombre;
    if (modalDescription) modalDescription.textContent = project.descripcion;
    if (modalImage) {
      modalImage.src = project.imagen;
      modalImage.alt = project.nombre;
    }
    if (modalRol) modalRol.textContent = project.rol;
    if (modalSolucion) modalSolucion.textContent = project.solucion;
    if (modalCreditos) modalCreditos.textContent = project.creditos;
    if (modalDuracion) modalDuracion.textContent = project.duracion;
    if (modalWebsiteLink) modalWebsiteLink.href = project.website;
    
    // Populate tags
    const tagsContainer = document.getElementById('modalTags');
    if (tagsContainer) {
      tagsContainer.innerHTML = '';
      project.servicios.forEach(function(servicio) {
        const tag = document.createElement('div');
        tag.className = 'bg-gray-100 px-4 py-2 text-sm font-normal text-gray-700 rounded-lg';
        tag.textContent = servicio;
        tagsContainer.appendChild(tag);
      });
    }
    
    // Populate technologies/solutions
    const tecnologiasContainer = document.getElementById('modalTecnologias');
    if (tecnologiasContainer) {
      tecnologiasContainer.innerHTML = '';
      project.tecnologias.forEach(function(tech) {
        const div = document.createElement('div');
        div.className = 'text-gray-700';
        div.textContent = tech;
        tecnologiasContainer.appendChild(div);
      });
    }
    
    // Show modal
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeProjectModal() {
    const modal = document.getElementById('projectModal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = 'auto';
    }
  }

  // Close modal with Escape key
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      closeProjectModal();
    }
  });
</script>

<style>
  /* Animaciones adicionales para suavizar las transiciones */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(2rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .group:hover .transition-transform {
    animation: fadeInUp 0.3s ease-out;
  }

  /* Mejoras en la responsividad */
  @media (max-width: 1023px) {
    .lg\:grid-flow-col-dense {
      grid-auto-flow: initial;
    }
    
    .lg\:col-start-2,
    .lg\:col-start-1 {
      grid-column-start: auto;
    }
  }
</style>
